{% extends 'Base/base_app.html' %}
{% load static %}

{% block title %}
    Editar perfil
{% endblock %}

{% block content_main %}
    {% if errors %}
        <div class="row uniform 50%">
            <div class="12u 12u(mobilep)">
                {% for error in errors %}
                    <p style="color: red">*{{ error }}</p>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if edited %}
        <div class="row uniform 50%">
            <div class="12u 12u(mobilep)">
                <p style="color: green">Cambios guardados con éxito</p>
            </div>
        </div>
    {% endif %}
    <div class="row">
        <div class="8u 12u(narrower)">

            <section class="box special">
                <form action="{% url 'Authentication:EditProfile' %}" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="edit_type" value="profile">
                    <div class="row uniform 50%">
                        <div class="12u 12u(mobilep)" align="center">
                            {% if request.user.image_profile %}
                                <span class="image fit" style="margin-top: 10px"><img
                                        src="{{ request.user.image_profile.url }}"
                                        alt=""
                                        style="width: 200px; height: 200px;"/></span>
                            {% else %}
                                <span class="image fit" style="margin-top: 10px"><img
                                        src="{% static 'images/default_profile.jpg' %}"
                                        alt="" style="width: 200px; height: 200px;"/></span>
                            {% endif %}
                            <input type="file" accept="image/*" name="image">
                        </div>
                    </div>
                    <div class="row uniform 50%">
                        <div class="6u 12u(mobilep)" align="left">
                            <label>Nombres</label>
                            <input type="text" name="first_name" placeholder="Tus nombres"
                                   value="{{ request.user.first_name }}"/>
                        </div>
                        <div class="6u 12u(mobilep)" align="left">
                            <label>Apellidos</label>
                            <input type="text" name="last_name" placeholder="Tus apellidos"
                                   value="{{ request.user.last_name }}"/>
                        </div>
                        <div class="12u 12u(mobilep)" align="left">
                            <label>Correo electrónico</label>
                            <input type="email" name="email" placeholder="Tu correo electrónico"
                                   value="{{ request.user.email }}"/>
                        </div>
                        <div class="12u 12u(mobilep)" align="left">
                            <label>Matrícula</label>
                            <input type="text" name="register" placeholder="Matrícula (UADY)"
                                   value="{{ request.user.register }}"/>
                        </div>
                        <div class="12u 12u(mobilep)" align="right">
                            <input class="button special" type="submit"
                                   value="Guardar cambios"/>
                        </div>
                    </div>

                </form>
            </section>
        </div>
        <div class="4u 12u(narrower)">
            <div class="12u 12u(narrower)" align="center">
                <i class="fa fa-question-circle fa-4x" aria-hidden="true"></i>
                <hr/>
            </div>
            <div class="12u 12u(narrower)">
                <ul style="list-style: none; padding: 0">
                    <li><i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> Edita tu perfil</li>
                    <li><i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> Cambia tu contraseña</li>
                    <li><i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> Elige una nueva imágen de perfil
                    </li>
                </ul>
            </div>
            <section class="box special">
                <p><b>Cambiar contraseña</b></p>
                <hr/>
                <form id="singUpForm" method="post" action="{% url 'Authentication:EditProfile' %}"
                      enctype="multipart/form-data">
                    <input type="hidden" name="edit_type" value="password">
                    <div class="row uniform 50%">
                        <div class="12u 12u(mobilep)">
                            <input type="password" name="current_password" id="brand" value=""
                                   placeholder="Contraseña actual"/>
                        </div>
                        <div class="12u 12u(mobilep)">
                            <input type="password" name="new_password" id="model" value="" placeholder="Contraseña nueva"/>
                        </div>
                        <div class="12u 12u(mobilep)">
                            <input type="password" name="confirm_password" id="model" value=""
                                   placeholder="Repetir contraseña"/>
                        </div>
                    </div>
                    <div class="row uniform">
                        <div class="12u" align="center">
                            <ul class="actions">
                                <li><input id="register-btn" class="button special" type="submit"
                                           value="Cambiar contraseña"/>
                                </li>
                            </ul>
                        </div>
                    </div>
                </form>
            </section>

        </div>
    </div>
{% endblock %}